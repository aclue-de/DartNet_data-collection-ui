var B=Object.defineProperty;var O=(e,n,r)=>n in e?B(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var v=(e,n,r)=>(O(e,typeof n!="symbol"?n+"":n,r),r);import{c as w,a as R,u as _,b as P,d as y,j as t,C as x,B as I,e as d,f as $,F as C,r as h,g as s,h as F,I as b,i as M,k as E,l as U,m as W,n as j,o as H,D as q,p as G,q as K,s as J,T as V,S as Q,t as X,v as Y,w as Z,x as ee,y as te,L as k,z,A as ne,E as re,R as ie,G as oe,H as ae,J as ce,P as se,K as le,M as de}from"./vendor.75ddc35b.js";const ue=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}};ue();var g=(e=>(e[e.Init=0]="Init",e[e.NewThrow=1]="NewThrow",e[e.ConfirmNewThrow=2]="ConfirmNewThrow",e))(g||{});const{reducer:he,actions:f}=w({name:"collectionNavigationpState",initialState:0,reducers:{nextState:e=>{const n=e+1;return Object.values(g).includes(n)?n:e},previousState:e=>{const n=e-1;return Object.values(g).includes(n)?n:e},resetState:e=>0}});var S=(e=>(e[e.Init=0]="Init",e))(S||{});const{reducer:ge,actions:L}=w({name:"labellingNavigationState",initialState:0,reducers:{nextState:e=>{const n=e+1;return Object.values(S).includes(n)?n:e},previousState:e=>{const n=e-1;return Object.values(S).includes(n)?n:e},resetState:e=>0}}),{reducer:me,actions:D}=w({name:"labellingNavigationState",initialState:"init",reducers:{setState:(e,n)=>e!==n.payload?n.payload:e}}),T=w({name:"newThrow",initialState:Array(),reducers:{addThrow:(e,n)=>{if(e.length===3)return console.error("Error, trying to append throw when state already has three throws:",e),e;const r=[...e,n.payload];return console.log("Next State",r),r},resetState:e=>[]}}),pe=R({collectionNavigationState:he,labellingNavigationState:ge,appNavigationState:me,newThrowState:T.reducer}),p=e=>_(e),fe=()=>{const{t:e}=P(),n=y();return t(x,{maxWidth:"sm",children:t(I,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:t(d,{variant:"contained",size:"large",startIcon:t($,{}),onClick:()=>{n(f.nextState())},children:e("newThrow")})})})},Se=()=>t(C,{children:t("p",{children:"Labelling Init"})}),we=e=>{const[n,r]=h.exports.useState(1),[a,i]=h.exports.useState(0),o=[],c=l=>{r(1),i(l),e.setScoreCallback(1*l)},u=()=>{r(1),i(25),e.setScoreCallback(1*25)};for(let l=0;l<=20;l++)o.push(t(d,{variant:a===l?"contained":"text",onClick:()=>{c(l)},children:l}));return o.push(t(d,{variant:a===25?"contained":"text",onClick:()=>{u()},children:25})),s(x,{children:[o,t("br",{}),t(d,{variant:n===1?"contained":"text",onClick:()=>{r(1),e.setScoreCallback(1*a)},children:"x1"}),t(d,{variant:n===2?"contained":"text",onClick:()=>{r(2),e.setScoreCallback(2*a)},children:"x2"}),t(d,{disabled:a===25,variant:n===3?"contained":"text",onClick:()=>{r(3),e.setScoreCallback(3*a)},children:"x3"})]})},xe="http://192.168.2.40:8000";class ve{constructor(n){v(this,"piUrl");v(this,"newImageRoute","new-image");this.piUrl=n}async newImage(){return F.get("https://reshape.sport1.de/c/t/61df2ed2-cfd6-4b0e-a177-715d645ae283/1200x675",{responseType:"arraybuffer"}).then(r=>r.data)}}const be=new ve(xe),Ce=()=>{const e=y(),n=p(m=>m.newThrowState),[r,a]=h.exports.useState(""),[i,o]=h.exports.useState(0),[c,u]=h.exports.useState(!1),l=async()=>{u(!0);const m=await be.newImage(),N=`data:image/png;base64,${H.Buffer.from(m).toString("base64")}`;console.log(`set img string to ${N}`),a(N),u(!1)},A=()=>{console.log("store state",n),n.length===2?(e(T.actions.addThrow({score:i,imgString:r})),e(f.nextState())):(console.log("next throw"),e(T.actions.addThrow({score:i,imgString:r})),a(""))};return t(x,{children:s(I,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:[s("p",{children:["Capture throw ",1+n.length,"/3"]}),t("div",{hidden:r!=="",children:t(b,{size:"large",onClick:()=>{l()},children:t(M,{sx:{fontSize:"3em"}})})}),s("div",{hidden:r==="",children:[t(b,{size:"large",disabled:c,onClick:A,children:t(E,{sx:{fontSize:"2em"}})}),t(b,{size:"large",disabled:c,onClick:l,children:t(U,{sx:{fontSize:"2em"}})})]}),t(W,{sx:{mt:3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:t(j,{children:t("img",{src:r,alt:""})},0)}),s("p",{children:["Score: ",i]}),t("br",{}),t(we,{setScoreCallback:m=>o(m)})]})})},Te=({open:e,title:n,text:r,cancel:a,confirm:i,autoFocus:o})=>s(q,{open:e,children:[t(G,{children:n}),t(K,{children:r}),s(J,{children:[t(d,{autoFocus:o==="ok",onClick:i,children:"Ok"}),t(d,{autoFocus:o!=="ok",onClick:a,children:"No"})]})]}),ye=()=>{const e=p(c=>c.newThrowState),[n,r]=h.exports.useState(!1),a=()=>{},i=()=>{r(!1)},o=()=>{r(!0)};return s(x,{maxWidth:"lg",children:[t(Te,{open:n,autoFocus:"no",cancel:()=>r(!1),confirm:i,title:"Cancel new Throw?",text:""}),s(I,{textAlign:"center",children:[t(V,{variant:"h3",children:"Upload ?"}),t("br",{}),t(Q,{direction:"row",justifyContent:"center",alignItems:"center",spacing:4,children:e.map((c,u)=>s(j,{children:[t("img",{src:c.imgString,alt:"",style:{height:"300px",width:"300px"}}),t(X,{position:"below",title:t("p",{children:c.score})})]},`throw_${u}`))}),s(Y,{variant:"outlined",style:{marginTop:"50px"},children:[t(d,{size:"large",sx:{minWidth:"160px"},onClick:a,endIcon:t(Z,{sx:{fontSize:"2em"}}),children:"Upload"}),t(d,{onClick:o,endIcon:t(ee,{sx:{fontSize:"2em"}}),children:"Cancel"})]})]})]})},Ie=()=>{const e=y(),n=p(c=>c.appNavigationState),r=p(c=>c.labellingNavigationState),a=p(c=>c.collectionNavigationState);return s(C,{children:[s(te,{children:[t(k,{onClick:()=>{e(f.resetState()),e(L.resetState()),e(D.setState("labelling"))},children:"Labelling"}),t(k,{onClick:()=>{e(f.resetState()),e(L.resetState()),e(D.setState("collection"))},children:"Collect Data"})]}),s(C,{children:[n==="collection"&&a===g.Init&&t(fe,{}),n==="collection"&&a===g.NewThrow&&t(Ce,{}),n==="collection"&&a===g.ConfirmNewThrow&&t(ye,{}),n==="labelling"&&r===S.Init&&t(Se,{})]})]})},Ne={newThrow:"Neuer Wurf",imagePreview:{title:"Bilder"}},ke={newThrow:"New Throw",imagePreview:{title:"Images"}};z.use(ne).init({fallbackLng:"de",fallbackNS:["common"],debug:!1,interpolation:{escapeValue:!1},resources:{de:{common:Ne},en:{common:ke}}});const Le=re({palette:{mode:"dark"}});ie.render(t(oe.StrictMode,{children:t(ae,{theme:Le,children:t(ce,{i18n:z,children:s(se,{store:le(pe),children:[t(de,{}),t(Ie,{})]})})})}),document.getElementById("root"));
