var D=Object.defineProperty;var z=(e,n,r)=>n in e?D(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var p=(e,n,r)=>(z(e,typeof n!="symbol"?n+"":n,r),r);import{c as y,a as B,u as L,b as j,d as I,j as t,C as g,B as x,e as d,f as O,r as h,g as s,h as P,I as w,i as R,k as _,l as $,m as F,n as v,o as E,D as M,p as U,q as A,s as W,T as H,S as q,t as G,v as K,w as J,x as V,F as Q,y as b,z as X,A as Y,R as Z,E as ee,G as te,H as ne,P as re,J as oe,K as ie}from"./vendor.915a8833.js";const ae=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};ae();var m=(e=>(e[e.Init=0]="Init",e[e.NewThrow=1]="NewThrow",e[e.ConfirmNewThrow=2]="ConfirmNewThrow",e))(m||{});const{reducer:se,actions:k}=y({name:"appState",initialState:0,reducers:{nextState:e=>{const n=e+1;return Object.values(m).includes(n)?n:e},previousState:e=>{const n=e-1;return Object.values(m).includes(n)?n:e}}}),S=y({name:"newThrow",initialState:Array(),reducers:{addThrow:(e,n)=>{if(e.length===3)return console.error("Error, trying to append throw when state already has three throws:",e),e;const r=[...e,n.payload];return console.log("Next State",r),r},resetState:e=>[]}}),ce=B({appState:se,newThrowState:S.reducer}),C=e=>L(e),le=()=>{const{t:e}=j(),n=I();return t(g,{maxWidth:"sm",children:t(x,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:t(d,{variant:"contained",size:"large",startIcon:t(O,{}),onClick:()=>{n(k.nextState())},children:e("newThrow")})})})},de=e=>{const[n,r]=h.exports.useState(1),[a,o]=h.exports.useState(0),i=[],c=l=>{r(1),o(l),e.setScoreCallback(1*l)},u=()=>{r(1),o(25),e.setScoreCallback(1*25)};for(let l=0;l<=20;l++)i.push(t(d,{variant:a===l?"contained":"text",onClick:()=>{c(l)},children:l}));return i.push(t(d,{variant:a===25?"contained":"text",onClick:()=>{u()},children:25})),s(g,{children:[i,t("br",{}),t(d,{variant:n===1?"contained":"text",onClick:()=>{r(1),e.setScoreCallback(1*a)},children:"x1"}),t(d,{variant:n===2?"contained":"text",onClick:()=>{r(2),e.setScoreCallback(2*a)},children:"x2"}),t(d,{disabled:a===25,variant:n===3?"contained":"text",onClick:()=>{r(3),e.setScoreCallback(3*a)},children:"x3"})]})},ue="http://192.168.2.40:8000";class he{constructor(n){p(this,"piUrl");p(this,"newImageRoute","new-image");this.piUrl=n}async newImage(){return P.get("https://reshape.sport1.de/c/t/61df2ed2-cfd6-4b0e-a177-715d645ae283/1200x675",{responseType:"arraybuffer"}).then(r=>r.data)}}const me=new he(ue),fe=()=>{const e=I(),n=C(f=>f.newThrowState),[r,a]=h.exports.useState(""),[o,i]=h.exports.useState(0),[c,u]=h.exports.useState(!1),l=async()=>{u(!0);const f=await me.newImage(),T=`data:image/png;base64,${E.Buffer.from(f).toString("base64")}`;console.log(`set img string to ${T}`),a(T),u(!1)},N=()=>{console.log("store state",n),n.length===2?(e(S.actions.addThrow({score:o,imgString:r})),e(k.nextState())):(console.log("next throw"),e(S.actions.addThrow({score:o,imgString:r})),a(""))};return t(g,{children:s(x,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:[s("p",{children:["Capture throw ",1+n.length,"/3"]}),t("div",{hidden:r!=="",children:t(w,{size:"large",onClick:()=>{l()},children:t(R,{sx:{fontSize:"3em"}})})}),s("div",{hidden:r==="",children:[t(w,{size:"large",onClick:N,children:t(_,{sx:{fontSize:"2em"}})}),t(w,{size:"large",onClick:l,children:t($,{sx:{fontSize:"2em"}})})]}),t(F,{sx:{mt:3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:t(v,{children:t("img",{src:r,alt:""})},0)}),s("p",{children:["Score: ",o]}),t("br",{}),t(de,{setScoreCallback:f=>i(f)})]})})},ge=({open:e,title:n,text:r,cancel:a,confirm:o,autoFocus:i})=>s(M,{open:e,children:[t(U,{children:n}),t(A,{children:r}),s(W,{children:[t(d,{autoFocus:i==="ok",onClick:o,children:"Ok"}),t(d,{autoFocus:i!=="ok",onClick:a,children:"No"})]})]}),pe=()=>{const e=C(c=>c.newThrowState),[n,r]=h.exports.useState(!1),a=()=>{},o=()=>{r(!1)},i=()=>{r(!0)};return s(g,{maxWidth:"lg",children:[t(ge,{open:n,autoFocus:"no",cancel:()=>r(!1),confirm:o,title:"Cancel new Throw?",text:""}),s(x,{textAlign:"center",children:[t(H,{variant:"h3",children:"Upload ?"}),t("br",{}),t(q,{direction:"row",justifyContent:"center",alignItems:"center",spacing:4,children:e.map((c,u)=>s(v,{children:[t("img",{src:c.imgString,alt:"",style:{height:"300px",width:"300px"}}),t(G,{position:"below",title:t("p",{children:c.score})})]},`throw_${u}`))}),s(K,{variant:"outlined",style:{marginTop:"50px"},children:[t(d,{size:"large",sx:{minWidth:"160px"},onClick:a,endIcon:t(J,{sx:{fontSize:"2em"}}),children:"Upload"}),t(d,{onClick:i,endIcon:t(V,{sx:{fontSize:"2em"}}),children:"Cancel"})]})]})]})},we=()=>{const e=C(n=>n.appState);return s(Q,{children:[e===m.Init&&t(le,{}),e===m.NewThrow&&t(fe,{}),e===m.ConfirmNewThrow&&t(pe,{})]})},Se={newThrow:"Neuer Wurf",imagePreview:{title:"Bilder"}},xe={newThrow:"New Throw",imagePreview:{title:"Images"}};b.use(X).init({fallbackLng:"de",fallbackNS:["common"],debug:!1,interpolation:{escapeValue:!1},resources:{de:{common:Se},en:{common:xe}}});const Ce=Y({palette:{mode:"dark"}});Z.render(t(ee.StrictMode,{children:t(te,{theme:Ce,children:t(ne,{i18n:b,children:s(re,{store:oe(ce),children:[t(ie,{}),t(we,{})]})})})}),document.getElementById("root"));
